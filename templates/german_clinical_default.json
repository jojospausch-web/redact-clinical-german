{
  "template_name": "German-Clinical-Structured-v2",
  "version": "2.0.0",
  
  "zones": {
    "header": {
      "page": 1,
      "y_start": 0,
      "y_end": 120,
      "redaction": "full",
      "preserve_logos": true
    },
    "footer": {
      "pages": "all",
      "y_start": 750,
      "y_end": 842,
      "redaction": "keyword_based",
      "keywords": ["IBAN", "Bankverbindung", "Sparkasse", "BIC", "Stiftung", "Vorstand"]
    }
  },
  
  "structured_patterns": {
    "patient_block": {
      "pattern": "(Herr|Frau)\\s+([A-ZÄÖÜ][a-zäöüß-]+),\\s+([A-ZÄÖÜ][a-zäöüß-]+),\\s+\\*(\\d{2}\\.\\d{2}\\.\\d{4})",
      "groups": {
        "1": "SALUTATION",
        "2": "LASTNAME",
        "3": "FIRSTNAME",
        "4": "BIRTHDATE"
      }
    },
    "case_id": {
      "pattern": "Pat\\.?-?Nr\\.?:?\\s*([0-9]{6,10})",
      "type": "CASE_ID"
    },
    "address": {
      "pattern": "([A-ZÄÖÜ][a-zäöüß]+(?:straße|str\\.|weg|platz|allee))\\s+(\\d+[a-z]?),?\\s+(\\d{5})\\s+([A-ZÄÖÜ][a-zäöüß]+)",
      "type": "ADDRESS"
    },
    "doctor_signature": {
      "context_trigger": "Mit freundlichen Grüßen",
      "pattern": "(Prof\\.|Dr\\.|PD)\\s+(med\\.\\s+)?([A-ZÄÖÜ][a-zäöüß-]+(?:\\s+[A-ZÄÖÜ][a-zäöüß-]+)+)",
      "type": "DOCTOR_NAME",
      "lookahead": 200
    },
    "referring_doctor": {
      "context_trigger": "Zuweiser",
      "pattern": "Dr\\.\\s+([A-ZÄÖÜ][a-zäöüß-]+)",
      "type": "REFERRING_DOCTOR"
    },
    "postal_code_with_city": {
      "pattern": "(\\d{5})\\s+([A-ZÄÖÜ][a-zäöüß]+(?:dorf|burg|stadt|heim)?)",
      "groups": {
        "1": "POSTAL_CODE",
        "2": "CITY"
      }
    },
    "postal_code_standalone": {
      "pattern": "(?:PLZ:?\\s*)?(\\d{5})(?!\\d)",
      "type": "POSTAL_CODE"
    }
  },
  
  "location_anonymization": {
    "enabled": true,
    "city_database": "data/cities_de.txt",
    "facilities_database": "data/medical_facilities_de.json",
    
    "context_triggers": {
      "prepositions": ["in", "aus", "nach", "von", "bei"],
      "facility_keywords": [
        "Universitätsklinikum", "Uniklinik", "Klinikum", "Krankenhaus",
        "Herzzentrum", "Tumorzentrum", "Lungenzentrum", "MVZ", "Charité",
        "Medizinisches Versorgungszentrum"
      ],
      "referral_keywords": ["überwiesen", "Zuweiser", "eingewiesen", "verlegt"]
    },
    
    "location_blacklist": [
      "UKE",
      "Charité",
      "Northeim",
      "Eppendorf"
    ],
    
    "replacement": "[ORT]",
    "facility_replacement": "[KLINIK]"
  },
  
  "date_handling": {
    "enabled": true,
    "shift_days_range": [-30, 30],
    
    "german_months": {
      "full": ["Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"],
      "abbreviated": ["Jan", "Feb", "Mär", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez"]
    },
    
    "date_patterns": {
      "german_full": "\\b(\\d{1,2})\\. ([A-Za-zä]+) (\\d{4})\\b",
      "german_abbr": "\\b(\\d{1,2})\\. ([A-Za-zä]{3}\\.?) (\\d{4})\\b",
      "numeric": "\\b(\\d{2})\\.(\\d{2})\\.(\\d{4})\\b",
      "birthdate": "\\*(\\d{2}\\.\\d{2}\\.\\d{4})"
    },
    
    "birthdate": {
      "pattern": "\\*(\\d{2}\\.\\d{2}\\.\\d{4})",
      "action": "shift",
      "shift_days_range": [-30, 30]
    },
    "treatment_dates": {
      "pattern": "\\b(\\d{2}\\.\\d{2}\\.\\d{4})\\b",
      "action": "shift_relative"
    }
  },
  
  "image_pii_patterns": {
    "case_number": "\\d{6,10}",
    "name": "^[A-ZÄÖÜ][a-zäöüß]+\\s+[A-ZÄÖÜ][a-zäöüß]+$",
    "birthdate": "\\d{2}\\.\\d{2}\\.\\d{4}",
    "postal_code": "\\d{5}"
  }
}

